<div class="package">
	<div class="read_header">
		<h1>{$package->getTitle()}</h1>
		<p class="desc">{nl2br(htmlspecialchars($package->get('package_description')))}</p>
	</div>
	<div class="pSummary">
		<p class="thumb"><img src="{$package->get('item_screenshot_url')}" width="100" height="100" alt="" /></p>
		<table border="1" cellspacing="0" summary="Total Package Summary" class="meta">
			<tr>
				<th scope="row">{$lang->package_category}</th>
				<td><a href="{getUrl('package_srl','','category_srl', $package->get('category_srl'))}">{$categories[$package->get('category_srl')]->title}</a></td>
				<th scope="row">{$lang->homepage}</th>
				<td><a cond="$package->get('homepage')" href="{$package->get('homepage')}" onclick="window.open(this.href); return false;">{$package->get('homepage')}</a></td>
			</tr>
			<tr>
				<th scope="row">{$lang->package_license}</th>
				<td>{htmlspecialchars($package->get('license'))}</td>
				<th scope="row">{$lang->package_path}</th>
				<td><block cond="$package->get('path') && $module_info->resource_use_path=='Y'">{$package->get('path')}</block></td>
			</tr>
			<tr>
				<th scope="row">{$lang->package_author}</th>
				<td><a href="#popup_menu_area" onclick="return false;" class="member_{$package->get('member_srl')}">{$package->get('nick_name')}</a></td>
				<th scope="row">{$lang->package_regdate}</th>
				<td>{zdate($package->get('package_regdate'), "Y-m-d")}</td>
			</tr>
			<tr>
				<th scope="row"><!--@for($i=0;$i<5;$i++)--><!--@if($i<$package->get('star'))--><img src="./img/starOn.gif" alt="" /><!--@else--><img src="./img/starOff.gif" alt="" /><!--@end--><!--@end--></th>
				<td>
					<!--@if($package->get('package_voter'))-->
					{sprintf("%0.1f",$package->get('package_voted')/$package->get('package_voter')*2)}/{number_format($package->get('package_voter'))}
					<!--@else-->
					0.0
					<!--@end-->
				</td>
				<th scope="row">{$lang->package_downloaded_count}</th>
				<td>{$package->get('package_downloaded')}</td>
			</tr>
		</table>
		<table border="1" cellspacing="0" summary="Last Package Summary" class="meta">
			<tr>
				<!--@if($package->get('item_version')!=$latest_package->item_version)-->
				<th scope="row">{$lang->selected_version}</th>
				<td>
					{$package->get('item_version')}
					({$lang->latest_version} : <a href="{getUrl('item_srl','','type','')}">{$latest_package->item_version}</a>)
				</td>
				<!--@else-->
				<th scope="row">{$lang->latest_version}</th>
				<td>{$package->get('item_version')}</td>
				<!--@end-->
				<th scope="row">{$lang->downloaded_count}</th>
				<td>{$package->get('item_downloaded')}</td>
			</tr>
			<tr>
				<th scope="row"><!--@for($i=0;$i<5;$i++)--><!--@if($i<$package->get('item_star'))--><img src="./img/starOn.gif" alt="" /><!--@else--><img src="./img/starOff.gif" alt="" /><!--@end--><!--@end--></th>
				<td>
					<!--@if($package->get('item_voter'))-->
					{sprintf("%0.1f",$package->get('item_voted')/$package->get('item_voter')*2)}/{number_format($package->get('item_voter'))}
					<!--@else-->
					0.0
					<!--@end-->
				</td>
				<th scope="row">{$lang->package_update}</th>
				<td>{zdate($package->get('item_regdate'), "Y-m-d")}</td>
			</tr>
		</table>
		<table border="1" cellspacing="0" summary="Last Package Summary" class="meta" cond="count($package->get('depencies'))">
			<tr>
				<th scope="row">{$lang->attach_dependency}</th>
				<td>
				<!--@foreach($package->get('depencies') as $val)-->
					<a href="{getSiteUrl($site_module_info->domain, '', 'mid', $mid, 'package_srl', $val->package_srl)}">{$val->title} ver. {$val->version}</a>&nbsp;
				<!--@end-->
				</td>
			</tr>
		</table>
		
		<p class="download">
			<span class="btn22 down"><a href="{$package->get('download_url')}" cond="$package->get('download_url')" >{$lang->download}</a></span>
			<span class="btn22 modify" cond="$grant->manager"><a href="{getUrl('act','dispResourceModifyAttach','item_srl',$package->get('item_srl'))}">ver {$package->get('item_version')} {$lang->cmd_modify}</a></span>
		</p>
	</div>
	<div class="rsContent">
		{$package->getContent(false)}
	</div>
    <div style="text-align:right; padding:10px 0 25px 0">
		<span class="btn22 all"><a href="{getUrl('type','all')}">{$lang->cmd_view_all_version}</a></span>
		<span cond="!$from" class="btn22 list"><a href="{getUrl('package_srl','','type','', 'item_srl', '', 'from', '')}">{$lang->cmd_back}</a></span>
		<span cond="$from" class="btn22 list"><a href="{getUrl('item_srl','','type', $from, 'from', '')}">{$lang->cmd_back}</a></span>
    </div>
	
	<!-- COMMENT -->
	<div class="feedback" id="comment">
		<div class="fbHeader">
			<h2>평가</h2>
		</div>
		<ul cond="$package->getCommentCount()" class="fbList">
			{@ $_comment_list = $package->getComments() }
			<!--@foreach($_comment_list as $key => $comment)-->
			<li class="fbItem" id="comment_{$comment->get('comment_srl')}">
				<div class="fbMeta">
					<h3 class="author">
						<a href="#popup_menu_area" onclick="return false;" class="member_{$comment->get('member_srl')}">{$comment->getNickName()}</a>
					</h3>
					<p class="point">
						<!--@for($i=0;$i<5;$i++)--><!--@if($i<$comment->get('voted_count'))--><img src="./img/starOn.gif" alt="" /><!--@else--><img src="./img/starOff.gif" alt="" /><!--@end--><!--@end-->
					</p>
					<p class="time">{$comment->getRegdate("Y-m-d")}</p>
				</div>
				{$comment->getContent(false)}
				<p class="action" cond="$comment->isGranted()">
                    <button type="button" class="delete" onclick="if(confirm('{$lang->confirm_delete}')) doDeleteComment({$package->get('package_srl')}, {$package->get('item_srl')}, {$comment->get('comment_srl')});">{$lang->cmd_delete}</button>
				</p>
			</li>
			<!--@end-->
		</ul>

		<div cond="!$voted && $is_logged" cond="$XE_VALIDATOR_MESSAGE && $XE_VALIDATOR_ID == 'modules/resource/skins/xe_v3/include.package/1'" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
			<p>{$XE_VALIDATOR_MESSAGE}</p>
		</div>
		<form cond="!$voted && $is_logged" action="./" method="post" ruleset="insertComment" class="write_comment" id="write_comment">
			<input type="hidden" name="vid" value="{$vid}" />
			<input type="hidden" name="mid" value="{$mid}" />
			<input type="hidden" name="act" value="procResourceInsertComment" />
			<input type="hidden" name="package_srl" value="{$package->get('package_srl')}" />
			<input type="hidden" name="item_srl" value="{$package->get('item_srl')}" />
			<input type="hidden" name="star_point" value="" />
			<input type="hidden" name="xe_validator_id" value="modules/resource/skins/xe_v3/include.package/1" />
			<input type="hidden" name="error_return_url" value="{getRequestUriByServerEnviroment()}#commentForm" />
			<input type="hidden" name="success_return_url" value="{getRequestUriByServerEnviroment()}" />
			<ul class="starPoint">
				<li><a href="#" onclick="return false;" rel="1">1</a></li>
				<li><a href="#" onclick="return false;" rel="2">2</a></li>
				<li><a href="#" onclick="return false;" rel="3">3</a></li>
				<li><a href="#" onclick="return false;" rel="4">4</a></li>
				<li><a href="#" onclick="return false;" rel="5">5</a></li>
			</ul>
			<textarea name="content" rows="5" cols="50"></textarea>
			<div class="btnArea">
				<button type="submit" class="btn45">평가<br />등록</button>
			</div>
		</form>
	</div>
	<!-- /COMMENT -->
</div>

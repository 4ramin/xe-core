{@
	$mi = $module_info;
	$list_idx = 1;
}
<load target="js/jquery.easing.1.3.js" />
<load target="js/list.xe.js" />


<form action="./" method="get" class="rs_search" no-error-return-url="true">
	<input type="hidden" name="vid" value="{$vid}" />
	<input type="hidden" name="mid" value="{$mid}" />
	<input type="hidden" name="category_srl" value="{$category_srl}" />
	<div class="input-group">
	<input type="text" placeholder="검색" class="form-control" title="검색" value="{htmlspecialchars($search_keyword)}" name="search_keyword">
		<span class="input-group-btn">
			<button class="tb-btn btn-primary" type="submit"><i class="fa fa-search"></i> 검색</button>
		</span>
	</div>
</form>

<ul class="rsOrder {$order_type}">
	<block cond="$order_target=='newest'">
		<block cond="$order_type=='desc'">{@$_order_type = 'asc'}</block>
		<block cond="$order_type=='asc'">{@$_order_type = 'desc'}</block>
	</block>
	<block cond="$order_target!='newest'">{@$_order_type = 'desc'}</block>
	<li class="active"|cond="$order_target=='newest'">
		<a href="{getUrl('order_target','newest','order_type',$_order_type)}">{$lang->order_newest}순</a>
	</li>
	<block cond="$order_target=='download'">
		<block cond="$order_type=='desc'">{@$_order_type = 'asc'}</block>
		<block cond="$order_type=='asc'">{@$_order_type = 'desc'}</block>
	</block>
	<block cond="$order_target!='download'">{@$_order_type = 'desc'}</block>
	<li class="active"|cond="$order_target=='download'">
		<a href="{getUrl('order_target','download','order_type',$_order_type)}">{$lang->order_download}순</a>
	</li>
	<block cond="$order_target=='popular'">
		<block cond="$order_type=='desc'">{@$_order_type = 'asc'}</block>
		<block cond="$order_type=='asc'">{@$_order_type = 'desc'}</block>
	</block>
	<block cond="$order_target!='popular'">{@$_order_type = 'desc'}</block>
	<li class="active"|cond="$order_target=='popular'">
		<a href="{getUrl('order_target','popular','order_type',$_order_type)}">{$lang->order_popular}순</a>
	</li>
</ul>

<form class="list-body" method="get" action="./">
	<fieldset>
		<legend>List of Articles</legend>
		<div class="hide">
			<ul class="rsList">
				<li class="fbox article">
					<a href="#" class="title"><em></em><span class="iefix"></span></a>
					<span class="thumb">
						<img src="./img/noimage.gif" width="100" height="100" alt="" />
					</span>
					<ul class="flat meta">
						<li class="category"></li>
						<li class="vote"><img src="img/starOn.gif" alt="" class="on" /><img src="img/starOff.gif" alt="" class="off" /></li>
						<li class="download">다운로드 : <em></em></li>
						<li class="author"><a href="#popup_menu_area" class="member_" onclick="return false">{$val->nick_name}</a></li>
						<li class="update">업데이트 : </li>
						<li class="summary"></li>
					</ul>
					<p cond="$grant->manager" class="admin">
						<a href="#">{$lang->cmd_modify}</a>
						<button type="button">{$lang->cmd_delete}</button>
					</p>
				</li>
			</ul>
		</div>
		<div class="">
			<ul class="rsList">
				<li loop="$item_list => $key,$val" class="fbox article {($list_idx++%2)?'odd':'even'}">
					{@ $post_link     = getUrl('package_srl', $val->package_srl);}
					<a href="{$post_link}" class="title">{htmlspecialchars($val->title)} ver. {htmlspecialchars($val->item_version)}<span class="iefix"></span></a>
					<span class="thumb"><img src="{$val->item_screenshot_url}" width="100" height="100" alt="" /></span>
					<ul class="flat meta">
						<li class="category" cond="$val->category_srl">{$categories[$val->category_srl]->title}</li>
						<li class="vote"><!--@for($i=0;$i<5;$i++)--><!--@if($i<$val->package_star)--><img src="img/starOn.gif" alt="" /><!--@else--><img src="img/starOff.gif" alt="" /><!--@end--><!--@end--> <!--@if($val->package_voter)-->{sprintf("%0.1f",$val->package_voted/$val->package_voter*2)}/{number_format($val->package_voter)}<!--@else-->0/0<!--@end--></li>
						<li class="download"><span class="ic">다운로드</span> {number_format($val->package_downloaded)}</li>
						<li class="author"><a href="#popup_menu_area" class="member_{$val->member_srl}" onclick="return false">{$val->nick_name}</a></li>
						<li class="update">업데이트 : {zdate($val->item_regdate, "Y-m-d")}</li>
						<li class="summary">{cut_str(htmlspecialchars($val->package_description),300)}</li>
					</ul>
					<p cond="$grant->manager" class="admin">
						<a href="{getUrl('act','dispResourcePackage','package_srl',$val->package_srl)}">{$lang->cmd_modify}</a>
						<button type="button" onclick="if(confirm('{$lang->confirm_delete}')) doDeleteItem({$val->package_srl},{$val->item_srl}); return false;">{$lang->cmd_delete}</button>
					</p>
				</li>
				<li cond="!$item_list" class="none">{$lang->no_documents}</li>
			</ul>
		</div>
	</fieldset>
</form>

<!-- [list-footer] -->
<div class="list_footer">
	<div class="text-center">
		<ul class="pagination">
			<li>
				<a href="{getUrl('page','','document_srl','')}"><i class="fa fa-angle-left"></i> {$lang->first_page}</a>
			</li>
			<li loop="$page_no=$page_navigation->getNextPage()" class="active"|cond="$page==$page_no">
				<a href="#" cond="$page==$page_no">{$page_no}</a>
				<a cond="$page!=$page_no" href="{getUrl('page',$page_no,'document_srl','')}">{$page_no}</a>
			</li>
			<li>
				<a href="{getUrl('page',$page_navigation->last_page,'document_srl','')}">{$lang->last_page} <i class="fa fa-angle-right"></i></a>
			</li>
		</ul>
	</div>
</div>

<script type="text/javascript">
	xe.lang.confirm_delete = '{$lang->confirm_delete}';

	if (typeof window.xe_v3 == 'undefined') window.xe_v3 = {};
	jQuery.extend(xe_v3, {
		page : {$page},
		list_count : {$mi->list_count},
		last_page  : {$total_page},
		order_type : '{$order_type}',
		order_target : '{$order_target}',
		cut_size   : 300,
		children_srls    : '{$childs}',
		category_srl     : '{$category_srl}',
		search_keyword   : '{addslashes($search_keyword)}'
	});
	jQuery(function($){
		$('button.bsToggle')
		.click(function(){
			$(this)
			.next().toggle().end()
			.prev().toggle();
		})
		.next().hide();
	});
</script>
